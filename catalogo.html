<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cat√°logo - Local Market</title>
    <meta name="description" content="Explora nuestro cat√°logo completo de productos de calidad a precios incre√≠bles">
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    
    <!-- AOS CSS -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="styles.css">
    
    <style>
        /* ============================================
           SISTEMA DE TEMAS POR CATEGOR√çA
           ============================================ */
        
        body {
            transition: background-color 0.5s ease;
        }
        
        .page-header {
            transition: all 0.5s ease;
            position: relative;
            overflow: hidden;
        }
        
        /* Animaci√≥n de part√≠culas de fondo */
        .category-particles {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: 0;
            pointer-events: none;
        }
        
        .particle {
            position: absolute;
            font-size: 2rem;
            opacity: 0.3;
            animation: float 15s infinite ease-in-out;
        }
        
        @keyframes float {
            0%, 100% { 
                transform: translateY(0) rotate(0deg); 
                opacity: 0.3;
            }
            50% { 
                transform: translateY(-50px) rotate(180deg); 
                opacity: 0.6;
            }
        }
        
        /* Badge de categor√≠a activa */
        .category-badge {
            display: inline-block;
            padding: 0.5rem 1.5rem;
            border-radius: 50px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 1rem;
            animation: slideDown 0.6s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        
        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-30px) scale(0.8);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }
        
        /* Animaci√≥n del t√≠tulo */
        .page-title {
            animation: fadeInScale 0.8s ease;
        }
        
        @keyframes fadeInScale {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }
        
        /* Overlay con patr√≥n */
        .category-pattern {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0.05;
            background-size: 50px 50px;
            z-index: 0;
        }
        
        .pattern-muebles {
            background-image: repeating-linear-gradient(45deg, transparent, transparent 10px, rgba(255,255,255,.1) 10px, rgba(255,255,255,.1) 20px);
        }
        
        .pattern-electronica {
            background-image: 
                linear-gradient(45deg, rgba(255,255,255,.1) 25%, transparent 25%),
                linear-gradient(-45deg, rgba(255,255,255,.1) 25%, transparent 25%);
        }
        
        .pattern-cocina {
            background-image: radial-gradient(circle, rgba(255,255,255,.1) 1px, transparent 1px);
            background-size: 20px 20px;
        }
        
        /* ============================================
           TEMAS POR CATEGOR√çA
           ============================================ */
        
        /* MUEBLES - Marr√≥n/Madera */
        body.theme-muebles {
            background: linear-gradient(135deg, #FFF8DC 0%, #F5E6D3 100%);
        }
        body.theme-muebles .page-header {
            background: linear-gradient(135deg, #8B4513 0%, #A0522D 100%);
        }
        body.theme-muebles .category-badge {
            background: linear-gradient(135deg, #D2691E 0%, #8B4513 100%);
            color: white;
        }
        body.theme-muebles .result-count {
            background: rgba(139, 69, 19, 0.1);
            color: #8B4513;
        }
        body.theme-muebles .filters-card {
            border-left: 4px solid #8B4513;
        }
        
        /* ELECTRONICA - Azul/Tech */
        body.theme-electronica {
            background: linear-gradient(135deg, #E3F2FD 0%, #BBDEFB 100%);
        }
        body.theme-electronica .page-header {
            background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%);
        }
        body.theme-electronica .category-badge {
            background: linear-gradient(135deg, #42A5F5 0%, #1E88E5 100%);
            color: white;
        }
        body.theme-electronica .result-count {
            background: rgba(33, 150, 243, 0.1);
            color: #1976D2;
        }
        body.theme-electronica .filters-card {
            border-left: 4px solid #2196F3;
        }
        
        /* DECORACION - Rosa/Violeta */
        body.theme-decoracion {
            background: linear-gradient(135deg, #FCE4EC 0%, #F8BBD0 100%);
        }
        body.theme-decoracion .page-header {
            background: linear-gradient(135deg, #E91E63 0%, #C2185B 100%);
        }
        body.theme-decoracion .category-badge {
            background: linear-gradient(135deg, #EC407A 0%, #D81B60 100%);
            color: white;
        }
        body.theme-decoracion .result-count {
            background: rgba(233, 30, 99, 0.1);
            color: #C2185B;
        }
        body.theme-decoracion .filters-card {
            border-left: 4px solid #E91E63;
        }
        
        /* COCINA - Naranja/Rojo */
        body.theme-cocina {
            background: linear-gradient(135deg, #FFF3E0 0%, #FFE0B2 100%);
        }
        body.theme-cocina .page-header {
            background: linear-gradient(135deg, #FF5722 0%, #E64A19 100%);
        }
        body.theme-cocina .category-badge {
            background: linear-gradient(135deg, #FF6F42 0%, #FF5722 100%);
            color: white;
        }
        body.theme-cocina .result-count {
            background: rgba(255, 87, 34, 0.1);
            color: #E64A19;
        }
        body.theme-cocina .filters-card {
            border-left: 4px solid #FF5722;
        }
        
        /* NEGOCIO - Verde/$$ */
        body.theme-negocio {
            background: linear-gradient(135deg, #E8F5E9 0%, #C8E6C9 100%);
        }
        body.theme-negocio .page-header {
            background: linear-gradient(135deg, #4CAF50 0%, #388E3C 100%);
        }
        body.theme-negocio .category-badge {
            background: linear-gradient(135deg, #66BB6A 0%, #43A047 100%);
            color: white;
        }
        body.theme-negocio .result-count {
            background: rgba(76, 175, 80, 0.1);
            color: #388E3C;
        }
        body.theme-negocio .filters-card {
            border-left: 4px solid #4CAF50;
        }
        
        /* OTROS - Gris/Neutro */
        body.theme-otros {
            background: linear-gradient(135deg, #ECEFF1 0%, #CFD8DC 100%);
        }
        body.theme-otros .page-header {
            background: linear-gradient(135deg, #607D8B 0%, #455A64 100%);
        }
        body.theme-otros .category-badge {
            background: linear-gradient(135deg, #78909C 0%, #546E7A 100%);
            color: white;
        }
        body.theme-otros .result-count {
            background: rgba(96, 125, 139, 0.1);
            color: #455A64;
        }
        body.theme-otros .filters-card {
            border-left: 4px solid #607D8B;
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm sticky-top">
        <div class="container">
            <a class="navbar-brand" href="index.html">
                <span class="brand-name">Local<span class="brand-accent">Market</span></span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">Inicio</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="catalogo.html">Cat√°logo</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Page Header -->
    <section class="page-header">
        <div class="container text-center">
            <h1 class="page-title" data-aos="fade-up">Cat√°logo Completo</h1>
            <p class="page-subtitle" data-aos="fade-up" data-aos-delay="100">
                Encuentra exactamente lo que necesitas
            </p>
            <div class="result-count mt-3" data-aos="fade-up" data-aos-delay="200">
                <span id="resultCount">Cargando productos...</span>
            </div>
        </div>
    </section>

    <!-- Filters and Products -->
    <section class="catalog-section py-5">
        <div class="container">
            <div class="row">
                <!-- Filters Sidebar -->
                <div class="col-lg-3 mb-4">
                    <div class="filters-card" data-aos="fade-right">
                        <h5 class="filters-title">
                            <i class="bi bi-funnel me-2"></i>Filtros
                        </h5>
                        
                        <!-- Search -->
                        <div class="filter-group">
                            <label class="filter-label">
                                <i class="bi bi-search"></i> Buscar
                            </label>
                            <input type="text" 
                                   id="searchInput" 
                                   class="form-control" 
                                   placeholder="Nombre o descripci√≥n...">
                        </div>

                        <!-- Category Filter -->
                        <div class="filter-group">
                            <label class="filter-label">
                                <i class="bi bi-grid"></i> Categor√≠a
                            </label>
                            <select id="categoryFilter" class="form-select">
                                <option value="">Todas las categor√≠as</option>
                                <option value="muebles">Muebles</option>
                                <option value="electronica">Electr√≥nica</option>
                                <option value="decoracion">Decoraci√≥n</option>
                                <option value="cocina">Cocina</option>
                                <option value="negocio">Negocio</option>
                                <option value="otros">Otros</option>
                            </select>
                        </div>

                        <!-- Filtro de Regi√≥n -->
                        <div class="filter-group">
                            <label class="filter-label">
                                <i class="bi bi-map"></i> Regi√≥n
                            </label>
                            <select id="regionFilter" class="form-select">
                                <option value="">Todas las regiones</option>
                                <option value="Metropolitana">Regi√≥n Metropolitana</option>
                                <option value="Valpara√≠so">Valpara√≠so</option>
                                <option value="Biob√≠o">Biob√≠o</option>
                                <option value="Maule">Maule</option>
                                <option value="O'Higgins">O'Higgins</option>
                                <option value="Coquimbo">Coquimbo</option>
                                <option value="Araucan√≠a">Araucan√≠a</option>
                                <option value="Los Lagos">Los Lagos</option>
                                <option value="Antofagasta">Antofagasta</option>
                                <option value="Atacama">Atacama</option>
                                <option value="Tarapac√°">Tarapac√°</option>
                                <option value="Arica y Parinacota">Arica y Parinacota</option>
                                <option value="Los R√≠os">Los R√≠os</option>
                                <option value="Ays√©n">Ays√©n</option>
                                <option value="Magallanes">Magallanes</option>
                                <option value="√ëuble">√ëuble</option>
                            </select>
                        </div>

                        <!-- Filtro de Comuna -->
                        <div class="filter-group">
                            <label class="filter-label">
                                <i class="bi bi-geo-alt"></i> Comuna
                            </label>
                            <select id="comunaFilter" class="form-select">
                                <option value="">Todas las comunas</option>
                            </select>
                            <small class="text-muted">Selecciona primero una regi√≥n</small>
                        </div>

                        <!-- Estado Filter -->
                        <div class="filter-group">
                            <label class="filter-label">
                                <i class="bi bi-star"></i> Estado
                            </label>
                            <select id="estadoFilter" class="form-select">
                                <option value="">Todos los estados</option>
                                <option value="nuevo">Nuevo</option>
                                <option value="como nuevo">Como Nuevo</option>
                                <option value="usado">Usado</option>
                            </select>
                        </div>

                        <!-- Price Range -->
                        <div class="filter-group">
                            <label class="filter-label">
                                <i class="bi bi-cash-stack"></i> Rango de Precio
                            </label>
                            <div class="row g-2">
                                <div class="col-6">
                                    <input type="number" 
                                           id="minPrice" 
                                           class="form-control form-control-sm" 
                                           placeholder="M√≠n">
                                </div>
                                <div class="col-6">
                                    <input type="number" 
                                           id="maxPrice" 
                                           class="form-control form-control-sm" 
                                           placeholder="M√°x">
                                </div>
                            </div>
                        </div>

                        <!-- Sort -->
                        <div class="filter-group">
                            <label class="filter-label">
                                <i class="bi bi-sort-down"></i> Ordenar por
                            </label>
                            <select id="sortBy" class="form-select">
                                <option value="fecha-desc">M√°s recientes</option>
                                <option value="precio-asc">Menor precio</option>
                                <option value="precio-desc">Mayor precio</option>
                                <option value="nombre">Nombre A-Z</option>
                            </select>
                        </div>

                        <!-- Hide Sold -->
                        <div class="filter-group">
                            <div class="form-check">
                                <input class="form-check-input" 
                                       type="checkbox" 
                                       id="hideSold" 
                                       checked>
                                <label class="form-check-label" for="hideSold">
                                    Ocultar vendidos
                                </label>
                            </div>
                        </div>

                        <!-- Clear Filters -->
                        <button id="clearFilters" class="btn btn-outline-secondary w-100 mt-3">
                            <i class="bi bi-x-circle me-2"></i>Limpiar Filtros
                        </button>
                    </div>
                </div>

                <!-- Products Grid -->
                <div class="col-lg-9">
                    <div id="productsGrid" class="row g-4">
                        <!-- Products will be loaded here dynamically -->
                        <div class="col-12 text-center py-5">
                            <div class="spinner-border text-primary" role="status">
                                <span class="visually-hidden">Cargando...</span>
                            </div>
                            <p class="mt-3">Cargando productos...</p>
                        </div>
                    </div>

                    <!-- No Results -->
                    <div id="noResults" class="text-center py-5 d-none">
                        <i class="bi bi-search" style="font-size: 4rem; color: #ccc;"></i>
                        <h3 class="mt-3">No se encontraron productos</h3>
                        <p class="text-muted">Intenta ajustar los filtros de b√∫squeda</p>
                        <button class="btn btn-primary mt-3" onclick="clearFilters()">
                            Limpiar Filtros
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Product Modal -->
    <div class="modal fade" id="productModal" tabindex="-1">
        <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="modalTitle">Producto</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-6">
                            <!-- Carousel for multiple images -->
                            <div id="modalCarousel" class="carousel slide" data-bs-ride="false">
                                <div class="carousel-inner" id="modalCarouselInner">
                                    <!-- Images will be loaded here -->
                                </div>
                                <button class="carousel-control-prev" type="button" data-bs-target="#modalCarousel" data-bs-slide="prev">
                                    <span class="carousel-control-prev-icon"></span>
                                </button>
                                <button class="carousel-control-next" type="button" data-bs-target="#modalCarousel" data-bs-slide="next">
                                    <span class="carousel-control-next-icon"></span>
                                </button>
                                <!-- Indicators -->
                                <div class="carousel-indicators" id="modalCarouselIndicators"></div>
                            </div>
                            <!-- Photo counter -->
                            <div id="modalThumbs" class="modal-thumbs mt-2 d-none" aria-label="Miniaturas de im√°genes"></div>
                            <div id="modalPhotoCount" class="text-center mt-2 text-muted"></div>
                        </div>
                        <div class="col-md-6">
                            <div class="modal-product-info">
                                <div class="modal-price" id="modalPrice"></div>
                                <div class="modal-meta-items" id="modalMeta"></div>
                                <div class="modal-description" id="modalDescription"></div>
                                <div class="modal-vendor-info" id="modalVendor"></div>
                                <div id="modalActions" class="mt-3"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="row g-4">
                <div class="col-md-4">
                    <h3 class="footer-title">Local<span class="brand-accent">Market</span></h3>
                    <p class="footer-text">Tu marketplace de barrio. Compra y vende productos de segunda mano localmente.</p>
                </div>
                
                <div class="col-md-4">
                    <h4 class="footer-subtitle">Informaci√≥n</h4>
                    <ul class="footer-links">
                        <li><a href="catalogo.html">Cat√°logo Completo</a></li>
                        <li><a href="index.html#como-comprar">C√≥mo Comprar</a></li>
                        <li><a href="index.html#faq">Preguntas Frecuentes</a></li>
                    </ul>
                </div>
                
                <div class="col-md-4">
                    <h4 class="footer-subtitle">Condiciones</h4>
                    <ul class="footer-info">
                        <li><i class="bi bi-geo-alt"></i> Retiro en Pirque, RM</li>
                        <li><i class="bi bi-credit-card"></i> Transferencia o Efectivo</li>
                        <li><i class="bi bi-shield-check"></i> Sin devoluciones</li>
                        <li><i class="bi bi-clock"></i> Reservas con abono del 30%</li>
                    </ul>
                </div>
            </div>
            
            <div class="footer-bottom">
                <div class="row align-items-center">
                    <div class="col-md-6 text-center text-md-start mb-2 mb-md-0">
                        <p class="mb-0">&copy; 2024 Local Market. Todos los derechos reservados.</p>
                    </div>
                    <div class="col-md-6 text-center text-md-end">
                        <div class="developer-info">
                            <p class="mb-1">
                                <strong>¬øNecesitas un sitio web?</strong>
                            </p>
                            <p class="mb-0">
                                Desarrollado por <strong>Carlos Jerez B.</strong>
                            </p>
                            <p class="developer-contact mb-0">
                                <a href="mailto:jerezcarlos70@gmail.com">
                                    <i class="bi bi-envelope"></i> jerezcarlos70@gmail.com
                                </a>
                                <span class="mx-2">|</span>
                                <a href="https://wa.me/56942229660?text=Hola,%20me%20interesa%20un%20sitio%20web" target="_blank">
                                    <i class="bi bi-whatsapp"></i> +56 9 4222 9660
                                </a>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- AOS JS -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    
    <!-- Custom JS -->
    <script src="app-dinamico.js"></script>
    
    <script>
        // ============================================
        // SISTEMA DE TEMAS POR CATEGOR√çA
        // ============================================
        
        const categoryThemes = {
            muebles: {
                name: 'Muebles',
                icon: 'ü™ë',
                particles: ['ü™ë', 'üõãÔ∏è', 'ü™û', 'üö™', 'üõèÔ∏è'],
                title: 'Muebles de Calidad'
            },
            electronica: {
                name: 'Electr√≥nica',
                icon: 'üíª',
                particles: ['üíª', 'üì±', '‚åö', 'üéÆ', 'üì∑'],
                title: 'Tecnolog√≠a y Electr√≥nica'
            },
            decoracion: {
                name: 'Decoraci√≥n',
                icon: 'üé®',
                particles: ['üé®', 'üñºÔ∏è', 'üïØÔ∏è', 'üå∫', '‚ú®'],
                title: 'Decoraci√≥n para tu Hogar'
            },
            cocina: {
                name: 'Cocina',
                icon: 'üç≥',
                particles: ['üç≥', 'üî™', 'üçΩÔ∏è', '‚òï', 'ü•ò'],
                title: 'Art√≠culos de Cocina'
            },
            negocio: {
                name: 'Negocio',
                icon: 'üè™',
                particles: ['üè™', 'üíº', 'üìä', 'üí∞', 'üõí'],
                title: 'Equipamiento de Negocio'
            },
            otros: {
                name: 'Otros',
                icon: 'üì¶',
                particles: ['üì¶', 'üéÅ', 'üîß', '‚ö°', 'üåü'],
                title: 'Productos Varios'
            }
        };

        // Aplicar tema de categor√≠a
        function applyCategoryTheme() {
            const urlParams = new URLSearchParams(window.location.search);
            const categoria = urlParams.get('categoria');
            
            if (categoria && categoryThemes[categoria]) {
                const theme = categoryThemes[categoria];
                const body = document.body;
                const pageHeader = document.querySelector('.page-header');
                const pageTitle = document.querySelector('.page-title');
                
                // Aplicar clase de tema al body
                body.className = `theme-${categoria}`;
                
                // Crear badge de categor√≠a
                const badge = document.createElement('div');
                badge.className = 'category-badge';
                badge.innerHTML = `${theme.icon} ${theme.name}`;
                
                // Actualizar t√≠tulo
                pageTitle.textContent = theme.title;
                pageTitle.style.position = 'relative';
                pageTitle.style.zIndex = '2';
                
                // Insertar badge antes del t√≠tulo
                pageTitle.parentNode.insertBefore(badge, pageTitle);
                
                // Crear part√≠culas animadas
                createParticles(pageHeader, theme.particles);
                
                // Crear patr√≥n de fondo
                const pattern = document.createElement('div');
                pattern.className = `category-pattern pattern-${categoria}`;
                pageHeader.insertBefore(pattern, pageHeader.firstChild);
            }
        }

        // Crear part√≠culas animadas
        function createParticles(container, emojis) {
            const particlesContainer = document.createElement('div');
            particlesContainer.className = 'category-particles';
            
            for (let i = 0; i < 15; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.textContent = emojis[Math.floor(Math.random() * emojis.length)];
                particle.style.left = Math.random() * 100 + '%';
                particle.style.top = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 10 + 's';
                particle.style.animationDuration = (10 + Math.random() * 10) + 's';
                particlesContainer.appendChild(particle);
            }
            
            container.insertBefore(particlesContainer, container.firstChild);
        }

        // Initialize AOS
        AOS.init({
            once: true,
            duration: 800,
            easing: 'ease-out-cubic'
        });

        // Aplicar tema antes de inicializar cat√°logo
        applyCategoryTheme();
        
        // Initialize catalog
        initCatalog();
    </script>
</body>
</html>